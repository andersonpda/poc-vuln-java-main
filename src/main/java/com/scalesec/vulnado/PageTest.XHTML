<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core" 
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head>
    <h:outputStylesheet library="css" name="bradesco-sans.css" />
    <h:outputStylesheet library="css" name="global.css" />
    <h:outputStylesheet library="css" name="personalizacao.css" />
    <h:outputStylesheet library="css" name="contratacao.css" />
    <h:outputStylesheet library="css" name="telaProposta.css" />
    <h:outputStylesheet library="css" name="barraDeProgresso.css" />
    <h:outputStylesheet library="css" name="contratacaoRisco/contratacao_risco.css" />
    <h:outputStylesheet library="css" name="contratacaoRisco/modal_risco.css" />
    <h:outputScript library="js" name="contrataprev.js" />
    <h:outputScript library="js" name="jquery-3.4.1.js" />
    <h:outputScript library="js" name="jquery.mask.js" />
    <h:outputScript library="js" name="home.js" />
    <script>
    
        $(document).ready(function() {
            $(".mostrarModalDetalhes").click(function() {
                $(".modalPgbl").css('display', 'flex');
                $(".fundoModal").css('display', 'flex');
            });
            
            $(".mask_money").keydown(function(){    
                 $(this).mask('00.000,00', {reverse: true});
                });
            
        });
        function userInteracDetalhes(acao, label) {
            window.dataLayer = window.dataLayer || [];
            dataLayer.push({
             'event': 'interaction',
             'custom':{
             'category': 'bs:previdencia:nova-proposta:contratacao:passos-1-a-6',
             'action': acao, 
             'label': label,
             },
            });
        }
        
        function userInteracVoltar(acao, label) {
            window.dataLayer = window.dataLayer || [];
            dataLayer.push({
             'event': 'interaction',
             'custom':{
             'category': 'bs:previdencia:nova-proposta:contratacao:passos-1-a-7',
             'action': acao, 
             'label': label,
             },
            });
        }
    
        function userInterac(acao, label) {
            window.dataLayer = window.dataLayer || [];
            dataLayer.push({
             'event': 'interaction',
             'custom':{
             'category': 'bs:previdencia:nova-proposta:contratacao:passos-1-a-6:passo-1',
             'action': acao, 
             'label': label,
             },
            });
        }
        
        isHome(window.location.href);
    </script>
</h:head>

<h:body>
    <div class="container">
        <div class="bs-container contratacao">
            <div class="bs-title tituloPlano">
                <h1>Contratação</h1>
            </div>

            <div class="section-steps">
                <div class="container-steps">
                    <ul class="progressbar">
                        <li class="active checked icon-info-dados-gerais">
                            <div class="check"><i class="icon-check"></i></div>
                            <p>Dados cliente</p>
                        </li>
                        <li class="active checked icon-info-premio-total">
                            <div class="check"><i class="icon-check"></i></div>
                            <p>Plano</p>
                        </li>
                        <li class="active checked icon-info-oferta">
                            <div class="check"><i class="icon-check"></i></div>
                            <p>Oferta</p>
                        </li>
                        <li class="active icon-doc-2a-via">
                            <div class="check"><i class="icon-check"></i></div>
                            <p>Proposta</p>
                        </li>
                        
                        <li class="disable icon-info-resumo-itens">
                            <div class="check"><i class="icon-check"></i></div>
                            <p>Confirmação</p>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="container-contratacao">
                <div class="section-card-contratacao">
                    <div class="bs-title-h3 blue align-center">
                        <h3 class="font-24 mg-bottom-20">
                            <label class="font-blue">#{contrataPrev.quadroResumoRisco.nomePlano}</label>
                        </h3>
                    </div>
                    <label class="title-card">Coberturas</label>
                    <div class="card-contratacao-risco">
                        <label class="title-card">#{contrataPrev.quadroResumoRisco.nomeBeneficio}</label>
                        <div class="flex-row">
                            <div class="flex-column">
                                <label>Valor da cobertura</label>
                                <label class="font-bold">R$ #{contrataPrev.quadroResumoRisco.valorCobertura}</label>
                            </div>
                            
                            <div class="flex-column">
                                <label>Contribuição #{contrataPrev.quadroResumoRisco.tipoContribuicao}</label>
                                <label class="font-bold">R$ #{contrataPrev.quadroResumoRisco.premioMensal}</label>
                            </div>
                        </div>
                        <div class="flex-column mg-top-16">
                                <label>Prazo de recebimento da pensão</label>
                                <label class="font-bold">#{contrataPrev.quadroResumoRisco.prazoPensao} anos</label>
                            </div>
                        
                        <label class="title-card mg-top-22">#{contrataPrev.quadroResumoRisco.nomeBeneficioPeculio}</label>
                        <div class="flex-row">
                            <div class="flex-column">
                                <label>Valor da cobertura</label>
                                <label class="font-bold">R$ #{contrataPrev.quadroResumoRisco.valorCoberturaPeculio}</label>
                            </div>
                            
                            <div class="flex-column">
                                <label>Contribuição #{contrataPrev.quadroResumoRisco.tipoContribuicao}</label>
                                <label class="font-bold">R$ #{contrataPrev.quadroResumoRisco.premioMensalPeculio}</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="total-card">
                        <i class="icon-pag-mensal"></i>
                        <label class="font-bold font-16"><label>Total #{contrataPrev.quadroResumoRisco.tipoContribuicao}</label></label>
                        <label class="total-label">R$ #{contrataPrev.quadroResumoRisco.totalMensal}</label>
                    </div>
            
                    <h:form>
                        <div class="bs-button" >
                            <div class="bs-button card-contratacao-risco bs-button--ghost bs-button--secondary mostrarModalDetalhes"
                                 onclick="userInteracDetalhes('Detalhes', 'contratação')">Detalhes
                            </div>
                        </div>
                    </h:form>
                </div>

                <div class="section-form-contratacao-etapa5">
                    <div class="container-etapas">
                        <div class="etapas-text">
                            <p>Etapa <span class="font-bold">4 de 5</span> da proposta</p>
                            <p>Estrutura comercial</p>
                        </div>
                        <div class="container-status">
                            <label>64% concluído</label>
                            <div class="statusbar">
                                <div class="status-progress etapa5"></div>
                            </div>
                        </div>
                    </div>

                <h:form id="formPropostaEtapa4">
                    <div class="section-formulario etapa5">
                        <div class="bs-title-h3">
                            <h3>Preencha os dados da sua estrutura comercial</h3>
                        </div>
						<div class="bs-form-container">
							<label class="bs-form__label">Esta proposta será emitida por uma estrutura comercial rede ou mercado?</label>

							<div class="bs-form-group">
								<div class="bs-form__control">
								     <div class="bs-form__control--check">
								         <h:selectOneRadio value="#{contrataPrev.telaRiscoEtapa4.estruturaComercial}" >
								             <f:selectItem itemValue="rede" itemLabel="Rede" />
								             <f:selectItem itemValue="mercado" itemLabel="Mercado" /> 
								             <f:ajax event="click" execute="formPropostaEtapa4" render="formPropostaEtapa4" listener="#{contrataPrev.doAlterarEstruturaComercialRisco()}" />
								         </h:selectOneRadio>
								     </div>
								     <label class="msg-validar-campo" style="visibility: #{contrataPrev.erroTela.estruturaComercial==true ? 'visible' : 'hidden'}">Favor informar a estrutura comercial</label>
								 </div>
							</div>
							<label class="msg-validar-campo" style="visibility: #{contrataPrev.erroTela.erroSucursalSap==true ? 'visible' : 'hidden'}">Sucursal não encontrada, avalie seu cadastro ou tente mais tarde</label>
						</div>
                        <div class="bs-form-container">
                            <div class="bs-form-group">
                            	<h:panelGroup rendered="#{contrataPrev.telaRiscoEtapa4.exibeMercado}">
									<h:panelGroup rendered="#{contrataPrev.telaRiscoEtapa4.autoPreenchimentoCorretor}">
	                                    <div class="bs-form-select sucursal">
	                                        <label class="bs-form__label">Sucursal</label>
	                                        <h:selectOneMenu id="sucursal" value="#{contrataPrev.telaRiscoEtapa4.codCorretorTela}" styleClass="bs-form__field">
	                                            <f:selectItem itemValue="" itemLabel="Selecione" />
	                                            <f:selectItems value="#{contrataPrev.opComercialTO}" var="lista" itemValue="#{lista.codSucursal}" itemLabel="#{lista.codSucursal} - #{lista.descricaoSucursal}" />
	                                            <f:ajax event="change" render="codigoCorretor" listener="#{contrataPrev.doIncluirCodCorretorRisco}" />
	                                        </h:selectOneMenu>
	                                        <label class="msg-validar-campo" style="display: #{contrataPrev.erroTela.sucursal==true ? 'block' : 'none'}">Favor informar a sucursal</label>
	                                        <label class="msg-validar-campo" style="display: #{contrataPrev.erroTela.tela04==true ? 'block' : 'none'}">#{contrataPrev.erroTela.mensagemTela04}</label>
	                                    </div>
	                                </h:panelGroup>
	                                
	                                <h:panelGroup rendered="#{contrataPrev.mockTesteSucursal}">
		                                <h:panelGroup rendered="#{contrataPrev.telaRiscoEtapa4.exibeSucursalDigitada}">
											<div class="bs-form__control">
												<label class="bs-form__label">Sucursal</label>
												<h:inputText id="codigoSucursalDigitada" maxlength="3" value="#{contrataPrev.telaRiscoEtapa4.codSucursalDigitado}" styleClass="bs-form__field"
															onkeypress="return event.charCode &gt;= 48 &amp;&amp; event.charCode &lt;= 57" />
												<label class="msg-validar-campo" style="display: #{contrataPrev.erroTela.sucursalDigitada==true ? 'block' : 'none'}">Favor informar o código da Sucursal</label>
											</div>
										</h:panelGroup>
									</h:panelGroup>
	                                
                                </h:panelGroup>
                                <h:panelGroup rendered="#{contrataPrev.telaRiscoEtapa4.exibeMercado}">
	                                <div class="bs-form__control">
	                                    <label class="bs-form__label">Código do corretor</label>
	                                    <h:inputText id="codigoCorretor" maxlength="12" value="#{contrataPrev.telaRiscoEtapa4.codCorretor}" styleClass="bs-form__field"
	                                                onkeypress="return event.charCode &gt;= 48 &amp;&amp; event.charCode &lt;= 57" />
	                                    <label class="msg-validar-campo" style="display: #{contrataPrev.erroTela.codigoCorretor==true ? 'block' : 'none'}">Favor informar o código do corretor</label>
	                                </div>
	                            </h:panelGroup>
                            	
                            	<h:panelGroup rendered="#{contrataPrev.telaRiscoEtapa4.exibeRede}">
	                                <div class="bs-form__control mg-0">
	                                    <label class="bs-form__label">Agência de produção</label>
	                                    <h:inputText maxlength="5" value="#{contrataPrev.telaRiscoEtapa4.agencia}" styleClass="bs-form__field"
	                                                 onkeypress="return event.charCode &gt;= 48 &amp;&amp; event.charCode &lt;= 57" />
	                                    <label class="msg-validar-campo" style="display: #{contrataPrev.erroTela.agenciaComercial==true ? 'block' : 'none'}">Favor informar a agência</label>
	                                </div>
	                            </h:panelGroup>
                            </div>
                            
                            <div class="bs-form-group mg-top-10">
                            	<h:panelGroup rendered="#{contrataPrev.telaRiscoEtapa4.exibeRede}">
	                                <div class="bs-form__control">
	                                    <label class="bs-form__label">Corretor master</label>
	                                    <h:inputText maxlength="6" value="#{contrataPrev.telaRiscoEtapa4.gerenteComercial}" styleClass="bs-form__field" 
	                                                 onkeypress="return event.charCode &gt;= 48 &amp;&amp; event.charCode &lt;= 57"/>
	                                    <label class="msg-validar-campo" style="display: #{contrataPrev.erroTela.gerenteComercial==true ? 'block' : 'none'}">Favor informar o gerente</label>
	                                </div>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{contrataPrev.telaRiscoEtapa4.exibeMercado}">
	                                <div class="bs-form__control">
	                                    <label class="bs-form__label">Agente/produtor (opcional)</label>
	                                    <h:inputText styleClass="bs-form__field" maxlength="7" value="#{contrataPrev.telaRiscoEtapa4.codAge}" 
	                                                onkeypress="return event.charCode &gt;= 48 &amp;&amp; event.charCode &lt;= 57"/>
	                                </div>
	                            </h:panelGroup>
                            </div>
                            
                            
                         	<h:panelGroup rendered="#{contrataPrev.mensagemEstruturaMercadoRisco}">	
								<label class="msg-validar-campo">Valide se o código do corretor está correto, ajuste se necessário, e prossiga com o preenchimento.</label>
							</h:panelGroup>
					
							<h:panelGroup rendered="#{contrataPrev.mensagemEstruturaRedeRisco}">	
								<label class="msg-validar-campo">A sucursal é meramente informativa. Caso esteja incorreta valide se o código do corretor está correto, ajuste se necessário, e prossiga com o preenchimento.</label>	
							</h:panelGroup> 
                                                      
                            
                        </div>
                    </div>
                    
                    <div class="footer align-end mg-top-20">
                        <div class="bs-button mg-bottom-8">
                            <h:commandButton action="#{contrataPrev.voltarRiscoEtapa3}" value="Voltar" 
                                styleClass="bs-button bs-button--ghost bs-button--secondary mg-right-24"
                                onclick="userInteracVoltar('Voltar', 'contratação')" />
                            <h:commandButton action="#{contrataPrev.avancarRiscoEtapa5}" value="Continuar" 
                                styleClass="bs-button bs-button--secondary"
                                onclick="userInterac('Estrutura comercial | Continuar', 'contratação')" />
                        </div>
                    </div>
               </h:form>
            </div>
        </div>
    </div>
    
    <h:form>
        <div id="modal-detalhes" class="fundoModal" style="display: none;">
            <div class="bs-modal__container">
                <h:commandLink styleClass="icon-nav-fechar"/>
                
                <div class="bs-modal__header">
                    <label class="bs-modal-title">#{contrataPrev.modalDetalhe.nomePlano}</label>
                </div>
                
                <div class="bs-modal__body">
                    <div class="container-content">
                        <div class="bs-modal-content">
                            <label class="title-modal">#{contrataPrev.modalDetalhe.nomeBeneficio}</label>
                            
                            <div class="flex-row">
                                <div class="box-produto">
                                    <div class="flex-column">
                                        <label>Idade mín (cliente)</label>
                                        <label class="font-bold">#{contrataPrev.modalDetalhe.clienteIdadeMin} anos</label>
                                    </div>
                                    <div class="flex-column">
                                        <label>Idade mín (beneficiário)</label>
                                        <label class="font-bold">#{contrataPrev.modalDetalhe.beneficiarioIdadeMin} anos</label>
                                    </div>
                                    <div class="flex-column" style="display: none;">
                                        <label>Cobertura mínima</label>
                                        <label class="font-bold">R$ #{contrataPrev.modalDetalhe.coberturaMin}</label>
                                    </div>
                                    <div class="flex-column">
                                        <label>Processo Susep</label>
                                        <label class="font-bold">#{contrataPrev.modalDetalhe.susep}</label>
                                    </div>
                                </div>
                                
                                <div class="box-produto">
                                    <div class="flex-column">
                                        <label>Idade máx (cliente)</label>
                                        <label class="font-bold">#{contrataPrev.modalDetalhe.clienteIdadeMax} anos</label>
                                    </div>
                                    <div class="flex-column">
                                        <label>Idade máx (beneficiário)</label>
                                        <label class="font-bold">#{contrataPrev.modalDetalhe.beneficiarioIdadeMax} anos</label>
                                    </div>
                                    <div class="flex-column" style="display: none;">
                                        <label>Cobertura máxima</label>
                                        <label class="font-bold">R$ #{contrataPrev.modalDetalhe.coberturaMax}</label>
                                    </div>
                                </div>
                            </div>
                            
                            <label class="title-modal">#{contrataPrev.modalDetalhe.nomeBeneficioPeculio}</label>
                            <div class="flex-row">
                                <div class="box-produto mg-bottom-0">
                                    <div class="flex-column">
                                        <label>Idade mín (cliente)</label>
                                        <label class="font-bold">#{contrataPrev.modalDetalhe.peculioIdadeMin} anos</label>
                                    </div>
                                    <div class="flex-column">
                                        <label>Idade mín (beneficiário)</label>
                                        <label class="font-bold">#{contrataPrev.modalDetalhe.peculioBeneficiarioIdadeMin} anos</label>
                                    </div>
                                    <div class="flex-column" style="display: none;">
                                        <label>Cobertura mínima</label>
                                        <label class="font-bold">R$ #{contrataPrev.modalDetalhe.peculioCoberturaMin}</label>
                                    </div>
                                    <div class="flex-column">
                                        <label>Processo Susep</label>
                                        <label class="font-bold">#{contrataPrev.modalDetalhe.peculioSusep}</label>
                                    </div>
                                </div>  
                                
                                <div class="box-produto">
                                    <div class="flex-column">
                                        <label>Idade máx (cliente)</label>
                                        <label class="font-bold">#{contrataPrev.modalDetalhe.peculioIdadeMax} anos</label>
                                    </div>
                                    <div class="flex-column">
                                        <label>Idade máx (beneficiário)</label>
                                        <label class="font-bold">#{contrataPrev.modalDetalhe.peculioBeneficiarioIdadeMax} anos</label>
                                    </div>
                                    <div class="flex-column" style="display: none;">
                                        <label>Cobertura máxima</label>
                                        <label class="font-bold">R$ #{contrataPrev.modalDetalhe.peculioCoberturaMax}</label>
                                    </div>
                                </div>
                            </div>  
                        </div>
                        
                        <div class="bs-modal-content icon-check">
	                        <label class="title-modal icone">Indicado para quem</label>
	                        <label class="content-check"><i class="check-modal"></i>Planeja garantir uma segurança financeira futura para o beneficiário (até #{contrataPrev.modalDetalhe.beneficiarioIdadeMax} anos)</label>
	                        <label class="content-check"><i class="check-modal"></i>Deseja amparar o beneficiário em decorrência do falecimento do participante</label>
	                        <label class="content-check"><i class="check-modal"></i>Oferece Assistência Funeral Familiar (participante e/ou do seu cônjuge, filhos/enteados de até 24 anos e filhos/enteados dependentes financeiros e com necessidades especiais, sem limite de idade) e Assistência Pet (cão ou gato do participante)</label>
	                        <label class="title-modal mg-top-22 icone">Durante o período de acumulação</label>
	                        <label class="content-check"><i class="check-modal"></i>Se o participante indicar como beneficiário um dependente, de acordo com a legislação tributária, as contribuições destinadas a custear somente o benefício de “Pensão Temporária” poderão ser deduzidas da base de cálculo do imposto de renda, até o limite de 12% dos rendimentos computados na base de cálculo do imposto devido na Declaração de Ajuste Anual. As deduções ficam condicionadas ao recolhimento, também, de contribuições para o regime geral de previdência social</label>
	                        <label class="title-modal mg-top-22 icone">Durante o recebimento do benefício</label>
	                        <label class="content-check"><i class="check-modal"></i>A pensão temporária estará sujeita à tributação do IR enquanto o pecúlio por morte não é tributavel</label>
                    	</div>
                    </div>
                </div>
            </div>
        </div>
    </h:form>
    </div>
</h:body>
</html>
